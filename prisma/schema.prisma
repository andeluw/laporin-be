generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// !SETUP Add your models below.
model Report {
  id           String    @id @default(cuid())
  // Store the user's public key for the officer to retrieve
  userPublicKey String?
  officerPublicKey String?
  details      String?   @default("No details provided")
  messages     Message[]
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}

model Message {
  id        String   @id @default(cuid())
  report    Report   @relation(fields: [reportId], references: [id])
  reportId  String
  sender    String // "user" or "officer"
  content   String // Encrypted message content
  createdAt DateTime @default(now())
}